{% extends "users/base.html" %}
{% load widget_tweaks %}
{% block title %}
    {{ profile.user.first_name }} {{ profile.user.last_name }} Profile
{% endblock title %}
{% block content %}
    <div class="container mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="w-full md:w-3/4 mx-auto bg-white p-4 sm:p-6 rounded-lg shadow-lg">
            <!-- Profile Information -->
            <div class="flex flex-col items-center mb-6">
                <img src="{{ profile.profile_picture.url }}"
                     alt="{{ profile.user.first_name }} {{ profile.user.last_name }} profile picture"
                     class="w-24 h-24 rounded-full mb-4" />
                <h1 class="text-2xl sm:text-3xl font-bold text-center">{{ profile.user.first_name }} {{ profile.user.last_name }}</h1>
                <h1 class="text-sm sm:text-sm font-bold text-center">{{ profile.user.username }}</h1>
                {% if user == profile.user %}
                    <a href="{% url 'edit_profile' %}"
                       class="text-gray-600 hover:text-blue-600 mt-2">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="1.5"
                             stroke="currentColor"
                             class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                        </svg>
                    </a>
                {% endif %}
                <!-- Social Links -->
                <div class="flex justify-center space-x-4 mt-4">
                    <!-- LinkedIn -->
                    <a href="{{ profile.linkedin_url }}"
                       class="text-gray-600 hover:text-blue-600">
                        <svg class="w-6 h-6"
                             fill="currentColor"
                             viewBox="0 0 24 24"
                             aria-hidden="true">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                        </svg>
                    </a>
                    <!-- Twitter -->
                    <a href="{{ profile.twitter_url }}"
                       class="text-gray-600 hover:text-blue-400">
                        <svg class="w-6 h-6"
                             fill="currentColor"
                             viewBox="0 0 24 24"
                             aria-hidden="true">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
                        </svg>
                    </a>
                    <!-- Website -->
                    <a href="{{ profile.website }}"
                       class="text-gray-600 hover:text-green-600">
                        <svg class="w-6 h-6"
                             fill="none"
                             stroke="currentColor"
                             viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                        </svg>
                    </a>
                </div>
            </div>
            <!-- About the applicant -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-2">About</h2>
                <p class="text-gray-600">{{ profile.about }}</p>
            </div>
            <!-- Resume link -->
            <div class="w-full mb-8">
                <a class="group relative inline-flex items-center overflow-hidden rounded bg-teal-600 px-8 py-3 text-white focus:outline-none focus:ring active:bg-teal-500"
                   href="{{ profile.resume.url }}"
                   target="_blank">
                    <span class="absolute -end-full transition-all group-hover:end-4">
                        <svg class="size-5 rtl:rotate-180"
                             xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </span>
                    <span class="text-sm font-medium transition-all group-hover:me-4">View Resume</span>
                </a>
            </div>
            <!-- Jobs Applied -->
            {% if user == profile.user %}
            <div class="mt-8">
                <h2 class="text-xl font-semibold mb-4">Jobs Applied</h2>
                {% for application in applications %}
                    <div class="bg-white rounded-lg shadow-sm mb-8 p-6 transition hover:shadow-lg">
                        <a href="{% url 'apply' application.job.slug %}" class="block">
                            <h3 class="text-xl sm:text-2xl font-bold text-teal-600 hover:text-teal-700">{{ application.job.title }}</h3>
                        </a>
                        <p class="text-sm text-gray-500 mt-2">Applied on: {{ application.application_date|date:"M d, Y" }}</p>
                        <div class="mt-4 flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke-width="1.5"
                                 stroke="currentColor"
                                 class="h-5 w-5 text-gray-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z" />
                            </svg>
                            <p class="text-sm text-gray-500">{{ application.job.company.company_name }}</p>
                        </div>
                        <div class="mt-2 flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke-width="1.5"
                                 stroke="currentColor"
                                 class="h-5 w-5 text-gray-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <p class="text-sm font-medium 
                                {% if application.status == 'pending' %}text-yellow-600
                                {% elif application.status == 'accepted' %}text-green-600
                                {% elif application.status == 'rejected' %}text-red-600
                                {% else %}text-gray-600{% endif %}">
                                {{ application.get_status_display }}
                            </p>
                        </div>
                    </div>
                {% empty %}
                    <div class="text-center text-gray-500 py-8">
                        No job applications yet.
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
